"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[61223],{51287:(e,i,t)=>{t.r(i),t.d(i,{default:()=>a});let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DeprecatedCarousel_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"DeprecatedCarousel_pin2"}],type:"Pin",abstractKey:null};l.hash="32a4849bbdfc8b2b65b08bf4b8c4c887";let a=l},820591:(e,i,t)=>{t.r(i),t.d(i,{default:()=>a});let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DeprecatedCarousel_pin2",selections:[{args:null,kind:"FragmentSpread",name:"usePinCarouselData_pin"}],type:"Pin",abstractKey:null};l.hash="c13d796babebf5b4a8ad6ebb2b50c324";let a=l},980069:(e,i,t)=>{var l,a,n;t.r(i),t.d(i,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinImage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"altText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"autoAltText",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n=[l={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"474x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV4",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"thumbnail",storageKey:null},a],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isThirdPartyAd",storageKey:null},{args:null,kind:"FragmentSpread",name:"StoryPinImage_pin"}],type:"Pin",abstractKey:null};r.hash="b67206267f16546b5985ba92b9cb6437";let s=r},292199:(e,i,t)=>{t.r(i),t.d(i,{default:()=>a});let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinVideoWithVisibility_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{args:null,kind:"FragmentSpread",name:"PinVideoWithVisibility_pin2"},{args:null,kind:"FragmentSpread",name:"useAutoplayOrgVideoOnHover_pin"}],type:"Pin",abstractKey:null};l.hash="2acc30117a5990f7f2c1367aad790447";let a=l},351483:(e,i,t)=>{t.r(i),t.d(i,{default:()=>a});let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinVideoWithVisibility_pin2",selections:[{args:null,kind:"FragmentSpread",name:"PinVideo_pin"}],type:"Pin",abstractKey:null};l.hash="c4876bc86b017c1390fdec3edc77f6d4";let a=l},244346:(e,i,t)=>{var l,a;t.r(i),t.d(i,{default:()=>r});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinVideo_pin",selections:[l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[a={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForWebCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[l,{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV4",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thumbnail",storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"PinVideo_pin2"}],type:"Pin",abstractKey:null};n.hash="7de1543a7e9ef08dab86ce070f3dca6a";let r=n},508268:(e,i,t)=>{t.r(i),t.d(i,{default:()=>a});let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinVideo_pin2",selections:[{args:null,kind:"FragmentSpread",name:"PinImage_pin"}],type:"Pin",abstractKey:null};l.hash="147f5f417b6700208c89761b9857c06e";let a=l},798325:(e,i,t)=>{var l,a,n;t.r(i),t.d(i,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinImage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n=[l={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"474x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:n,storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinPage",kind:"LinkedField",name:"pages",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"blocks",plural:!0,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"StoryPinVideoMetadata",kind:"LinkedField",name:"video",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinVideoFormats",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"thumbnail",storageKey:null},a],storageKey:null}],storageKey:null}],storageKey:null}],type:"StoryPinVideoBlock",abstractKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};r.hash="80b098957d3631584738a1b5491246b9";let s=r},139704:(e,i,t)=>{var l,a;t.r(i),t.d(i,{default:()=>r});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useAutoplayOrgVideoOnHover_pin",selections:[l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalVideoDuration",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[l,{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"v720P",plural:!1,selections:a=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV4",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"vHLSV3MOBILE",plural:!1,selections:a,storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};n.hash="2942f85ec1d9274bd2a1e72a4b5cf008";let r=n},119351:(e,i,t)=>{t.d(i,{Z:()=>w}),t(167912);var l,a,n=t(693967),r=t.n(n),s=t(883119),o=t(748722),d=t(598356),u=t(262032),g=t(333739),c=t(807023),m=t(140017),h=t(339001),p=t(223785),y=t(207012),x=t(968508),v=t(785893);let _=void 0!==l?l:l=t(798325);function S({alt:e,onError:i=()=>{},onLoad:t=()=>{},pinKey:l,_fixCompletedOnLoad:a}){let n=(0,y.Z)(_,l),{dominantColor:r}=n,{height:o,width:d,url:u}=function({pin:e}){let i=!(e.imageSpec_474x?.width&&e.imageSpec_474x.height&&e.imageSpec_474x.width>e.imageSpec_474x.height)&&e.imageSpec_474x||e.imageSpec_736x;return function(e){let i=e.storyPinData?.pages||[],t=i[0]?.blocks||[],l=t[0]?.video?.videoList?.vHLSV3MOBILE;return l?.thumbnail?{height:l?.height||0,width:l?.width||0,url:l.thumbnail||""}:null}(e)||i}({pin:n})??{};return(0,v.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{zIndex:x.Z.storyPinImage}},"data-test-id":"story-pin-image-box",width:"100%",children:(0,v.jsx)(s.Ee,{_fixCompletedOnLoad:a,alt:e,color:r||"transparent",naturalHeight:o??1,naturalWidth:d??1,onError:i,onLoad:t,src:u||""})})}var f=t(253482);let b=["ShoppingGridSmall","ShoppingGridSmallCarousel","ShoppingDynamicHeightGrid"],k=void 0!==a?a:a=t(980069),L=e=>({altText:e.alt_text??null,autoAltText:e.auto_alt_text??null,carouselData:e.carousel_data?{__typename:"PinCarouselData"}:null,description:e.description??null,dominantColor:e.dominant_color??null,entityId:e.id,gridTitle:e.grid_title??null,imageSpec_236x:e.images?.["236x"]?{height:e.images["236x"].height??null,url:e.images["236x"].url??null,width:e.images["236x"].width??null}:null,imageSpec_474x:e.images?.["474x"]?{height:e.images["474x"].height??null,url:e.images["474x"].url??null,width:e.images["474x"].width??null}:null,imageSpec_736x:e.images?.["736x"]?{height:e.images["736x"].height??null,url:e.images["736x"].url??null,width:e.images["736x"].width??null}:null,imageSpec_orig:e.images?.orig?{height:e.images.orig.height??null,url:e.images.orig.url??null,width:e.images.orig.width??null}:null,storyPinDataId:e.story_pin_data_id??null,videos:e.videos?{videoList:e.videos.video_list?{vHLSV4:e.videos.video_list.V_HLSV4?{height:e.videos.video_list.V_HLSV4.height||null,thumbnail:e.videos.video_list.V_HLSV4.thumbnail||null,width:e.videos.video_list.V_HLSV4.width||null}:null}:null}:null,title:e.title??null,isThirdPartyAd:e.is_third_party_ad??null,...g.tx}),P=({children:e,cropStoryPinImage:i,cropWidth:t,cropHeight:l})=>i?(0,v.jsx)(s.kC,{alignItems:"center",height:t?l:void 0,justifyContent:"start",width:t||void 0,children:e}):(0,v.jsx)(s.xu,{children:e}),w=({cropHeight:e,cropWidth:i,fallbackColor:t,highResOnly:l,imageFit:a,lowResOnly:n,mediumResOnly:g,onError:y,onLoad:x,pinKey:_,saved:w=!1,surface:F,ssrImpressionFixEnabled:T})=>{let I=(0,m.ZP)(),K=(0,d.Xx)(),{data:j,childDataKey__DEPRECATED:V}=(0,c.Q)(k,_,{useLegacyAdapter:L}),{altText:D,autoAltText:C,carouselData:E,description:H="",dominantColor:A,entityId:O,gridTitle:B,isThirdPartyAd:Z,title:z,videos:M}=j,W=(0,h.nk)(I.bt("Esto contiene una imagen de: {{ pinTitle }}", "This contains an image of: {{ pinTitle }}", "web.altText", undefined, true),{pinTitle:z||B}).join(""),$=(0,o.Z)({altText:D,autoAltText:C,i18n:I})||!!H?.trim().length&&H||W;if(E)return(0,v.jsx)(f.Z,{_fixCompletedOnLoad:T,highResOnly:l,isThirdPartyAd:Z,lowResOnly:n,onError:y,onLoad:x,pinId:O,pinKey:null});let R="",U,G=0,N=0;if(j.imageSpec_736x||j.imageSpec_orig||j.imageSpec_474x||j.imageSpec_236x){let e=j.imageSpec_236x;if(l)e=j.imageSpec_736x||j.imageSpec_orig||j.imageSpec_474x||j.imageSpec_236x;else if(g)e=j.imageSpec_474x||j.imageSpec_orig||j.imageSpec_236x;else{let{thumbnail:i,height:t,width:l}=M?.videoList?.vHLSV4||{};e=i?{url:i,height:t??1,width:l??1}:e}G=e?.height,N=e?.width,R=e?.url,U=n||g||l?e?.url?`${e.url} 1x`:"":[j.imageSpec_236x?.url&&`${j.imageSpec_236x.url} 1x`,j.imageSpec_474x?.url&&`${j.imageSpec_474x.url} 2x`,j.imageSpec_736x?.url&&`${j.imageSpec_736x.url} 3x`,j.imageSpec_orig?.url&&`${j.imageSpec_orig.url} 4x`].filter(Boolean).join(", ")}K?.image&&(G=K.image.height,N=K.image.width,R=K.image.url);let Q=["ShoppingGridSmall","ShoppingGridSmallCarousel"].includes(F)?void 0:p.Ml;return(0,v.jsx)(s.kC,{alignItems:"center",justifyContent:"start",minHeight:Q,children:(0,v.jsx)(s.xu,{flex:"grow",children:(0,v.jsx)("div",{className:r()({savedGradient:w}),children:j.storyPinDataId?(0,v.jsx)(P,{cropHeight:e,cropStoryPinImage:!!i&&b.includes(F),cropWidth:i,children:(0,v.jsx)(S,{_fixCompletedOnLoad:T,alt:$,onError:y,onLoad:x,pinKey:V})}):(0,v.jsx)(s.xu,{"data-test-id":"non-story-pin-image",height:i?e:void 0,width:i||void 0,children:(0,v.jsx)(u.Z,{_fixCompletedOnLoad:T,alt:$,color:"dominant"===t?A??void 0:t,crossOrigin:Z?"anonymous":void 0,fit:a,naturalHeight:G??1,naturalWidth:N??1,onError:y,onLoad:x,src:R??"",srcSet:U})})})})})}},568956:(e,i,t)=>{t.r(i),t.d(i,{default:()=>E});var l,a,n,r,s,o=t(667294);t(167912);var d=t(883119),u=t(119351),g=t(207012),c=t(807023),m=t(558273),h=t(363074),p=t(239821),y=t(31327),x=t(306781),v=t(233186),_=t(140017),S=t(785893);let f={__style:{backgroundColor:"#000"}};function b({backgroundImage:e,naturalHeight:i,naturalWidth:t,onRestartVideo:l,pinId:a}){let n=(0,_.ZP)();return(0,S.jsxs)(d.Ee,{alt:n.bt("imagen del Pin", "pin image", "image of a pin", undefined, true),naturalHeight:i,naturalWidth:t,src:e,children:[(0,S.jsx)(d.xu,{bottom:!0,dangerouslySetInlineStyle:f,left:!0,opacity:.8,position:"absolute",right:!0,top:!0}),(0,S.jsxs)(d.xu,{"data-test-id":`video-end-card-${a}`,direction:"column",display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%",children:[(0,S.jsx)(d.iP,{rounding:2,children:(0,S.jsxs)(d.xu,{display:"flex",justifyContent:"center",padding:2,children:[(0,S.jsx)(d.JO,{accessibilityLabel:n.bt("Visitar sitio", "Visit site", "Button when pressed goes to pin's website", undefined, true),color:"light",dangerouslySetSvgPath:{__path:x.Z},size:25}),(0,S.jsx)(d.xu,{margin:1}),(0,S.jsx)(d.xv,{color:"light",lineClamp:1,weight:"bold",children:n.bt("Visitar sitio", "Visit site", "Button when pressed goes to pin's website", undefined, true)})]})}),(0,S.jsx)(d.xu,{margin:3}),(0,S.jsx)(d.iP,{onTap:l,rounding:2,children:(0,S.jsxs)(d.xu,{display:"flex",justifyContent:"center",padding:2,children:[(0,S.jsx)(d.JO,{accessibilityLabel:n.bt("Ver de nuevo", "Watch again", "Button when pressed restarts the video", undefined, true),color:"light",dangerouslySetSvgPath:{__path:v.Z},size:25}),(0,S.jsx)(d.xu,{margin:1}),(0,S.jsx)(d.xv,{color:"light",lineClamp:1,weight:"bold",children:n.bt("Ver de nuevo", "Watch again", "Button when pressed restarts the video", undefined, true)})]})})]})]})}function k({aspectRatio:e,children:i}){return(0,S.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{aspectRatio:e}},children:i})}var L=t(718561);let P=new Set(["ConversationView","TodayTabFeed"]),w=void 0!==l?l:l=t(244346);var F=t(631602),T=t(626849),I=t(249803);let K=void 0!==n?n:n=t(139704);function j(e,i,t){var l;return(i="symbol"==typeof(l=function(e,i){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var l=t.call(e,i||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(i,"string"))?l:String(l))in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}let V=(0,F.Z)(function({isAutoplay:e,cropHeight:i,currentTime:l,lowResOnly:n,highResOnly:r,onLoad:s,onError:x,saved:v,onTimeChange:_,isExperimentalPinRep:f,pinKey:F,surface:T,playing:I,rootMargin:K,viewType:j,viewParameter:V,onVisibilityChanged:D,trackFullVisible:C,inVisibilityChangedHookExperiment:E,imageHeightModifier:H,cropWidth:A,video:O}){let B;let[Z,z]=(0,o.useState)(!1),[M,W]=(0,o.useState)(!I),$=(0,g.Z)(w,F),{childDataKey__DEPRECATED:R}=(0,c.Q)(void 0!==a?a:a=t(508268),$,{useLegacyAdapter:e=>({})}),{isDownstreamPromotion:U,promoter:G}=$,N=(0,m.jL)(!!U,!!G),Q=N&&!$.isEligibleForWebCloseup,J=f&&N&&$.isEligibleForWebCloseup&&!P.has(T),{setCurrentVideo:X}=(0,p.I)(),q=(0,h.Z)({onVisibilityChanged:D,trackFullVisible:C,rootMargin:K});e&&I&&M&&W(!1);let{url:Y}=$.imageSpec_236x??{},{entityId:ee,isPromoted:ei}=$,et=(0,o.useCallback)(({event:e})=>{e.preventDefault(),e.stopPropagation(),X({pinId:ee,isPromoted:!!ei,currentTime:0}),z(!1)},[ei,ee,X]),el=(0,o.useCallback)(()=>{ei&&z(J)},[J,ei]),ea=O??$.videos?.videoList?.vHLSV4;if(!ea)return null;let{height:en,thumbnail:er,width:es,url:eo}=ea,ed=O?.entityId??$.videos?.entityId??"",eu=(es??1)/(en??1),eg=T&&(0,y.Z)(T)&&"UserProfilePinGrid"!==T;if(eg&&(eu=1,B="transparent",H&&(eu-=H-1)),Z&&N)return(0,S.jsx)(d.xu,{ref:E?q:null,children:(0,S.jsx)(b,{backgroundImage:Y??"",naturalHeight:en??1,naturalWidth:es??1,onRestartVideo:et,pinId:ee})});let ec={highResOnly:r,lowResOnly:n,onError:x,onLoad:s,pinKey:R,saved:v};eg&&(ec={...ec,cropHeight:i,cropWidth:A,imageFit:"contain"});let em=(0,S.jsx)(d.xu,{ref:E?q:null,children:(0,S.jsx)(k,{aspectRatio:eu,children:(0,S.jsx)(u.Z,{...ec})})});return M?em:(0,S.jsx)(d.xu,{ref:E?q:null,children:(0,S.jsx)(L.ZP,{aspectRatio:eu,backgroundColor:B,captions:"",contextLogData:{viewParameter:V,component:0,objectId:ee,video_id:ed,view:j},cropHeight:i,fallback:em,hlsConfig:{capLevelToPlayerSize:!0,startPosition:l||-1},isAutoPlay:!!e,loop:Q||!f||!N,onEnded:el,onPlay:()=>{},onPlayError:()=>{},onTimeChange:_,playing:I,poster:Y||er||void 0,rootMargin:K,src:[{type:"video/m3u8",src:eo}]??[],surface:T,videoStartTime:l,volume:0})})}),D=void 0!==r?r:r=t(292199);class C extends o.Component{constructor(...e){super(...e),j(this,"calculateCurrentVideoTime",()=>{let{currentTimeFromPinRep:e,pin:i,videosAutoplaying:t}=this.props,{entityId:l}=i,a=(0,T.Z)(l,t);return this.currentVideoCurrentTime||a||e}),j(this,"handleVisibilityChanged",e=>{let{currentTimeFromPinRep:i,pin:t,setCurrentVideo:l,pauseAutoplay:a,videosAutoplaying:n}=this.props,{entityId:r,isPromoted:s}=t,o=(0,I.Z)(r,n),d=function(e,i){let{organicVideosAutoplaying:t,promotedVideosAutoplaying:l}=i,a={...t,...l};for(let i in a){let{paused:t}=a[i];if(i!==e&&!t)return!1}return!0}(r,n);e?s?l({pinId:r,isPromoted:s,currentTime:this.calculateCurrentVideoTime()}):d&&l({pinId:r,isPromoted:!!s,currentTime:this.calculateCurrentVideoTime()}):!e&&o&&a({pinId:r,isPromoted:!!s,currentTime:i||this.currentVideoCurrentTime})}),j(this,"handleVideoTimeChange",e=>{let{pin:i,onTimeChange:t,videosAutoplaying:l}=this.props,{entityId:a}=i;(0,I.Z)(a,l)&&(this.currentVideoCurrentTime=e.time),t&&t(e)})}componentDidMount(){this.props.onLoad&&this.props.onLoad()}componentDidUpdate(e){let{appInFocus:i}=e,{appInFocus:t,currentTimeFromPinRep:l,pauseAutoplay:a,pin:n,setCurrentVideo:r,videosAutoplaying:s}=this.props,{entityId:o,isPromoted:d}=n,u=(0,I.Z)(o,s);t!==i&&!t&&u?(this.pausedDueToBrowserOutOfFocus=!0,a({pinId:o,isPromoted:!!d,currentTime:l||this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&t&&(this.pausedDueToBrowserOutOfFocus=!1,r({pinId:o,isPromoted:!!d,currentTime:this.calculateCurrentVideoTime()}))}componentWillUnmount(){let{currentTimeFromPinRep:e,pauseAutoplay:i,pin:t,videosAutoplaying:l}=this.props,{entityId:a,isPromoted:n}=t;(0,I.Z)(a,l)&&i({pinId:a,isPromoted:!!n,currentTime:e||this.currentVideoCurrentTime})}render(){let{childDataKey__DEPRECATED:e,cropHeight:i,isAutoplay:t,pin:l,surface:a,videosAutoplaying:n,viewParameter:r,viewType:s,highResOnly:o,lowResOnly:d,onError:u,onLoad:g,saved:c,isExperimentalPinRep:m,rootMargin:h,cropWidth:p,imageHeightModifier:y,video:x}=this.props,{entityId:v}=l,_=(0,T.Z)(v,n),f=(0,I.Z)(v,n),b={cropHeight:i,rootMargin:h,currentTime:_,isAutoplay:t,viewParameter:r,viewType:s,onTimeChange:this.handleVideoTimeChange,onVisibilityChanged:this.handleVisibilityChanged,pinKey:e,surface:a,playing:f&&t,trackFullVisible:!1,highResOnly:o,lowResOnly:d,onError:u,onLoad:g,saved:c,isExperimentalPinRep:m,cropWidth:p,imageHeightModifier:y,...x?{video:x}:{}};return(0,S.jsx)(V,{...b})}}function E({pinKey:e,isHovering:i=!1,...l}){let{appUI:{appInFocus:a,isAutoplay:n,videosAutoplaying:r},pauseAutoplay:d,setCurrentVideo:u}=(0,p.I)(),m=(0,g.Z)(D,e),{childDataKey__DEPRECATED:h}=(0,c.Q)(void 0!==s?s:s=t(351483),m,{useLegacyAdapter:e=>({})}),y=(0,o.useRef)(i);return!function({pinKey:e,isHovering:i,hoverState:t}){let l=(0,g.Z)(K,e),{setCurrentVideo:a,pauseAutoplay:n,appUI:{videosAutoplaying:r}}=(0,p.I)(),s=l?.videos?.videoList?.v720P||l?.videos?.videoList?.vHLSV4||l?.videos?.videoList?.vHLSV3MOBILE;(0,o.useEffect)(()=>{if(l){if(t.current!==i){let{entityId:e,isPromoted:t,storyPinData:o}=l,d=(0,T.Z)(e,r);if(s||o?.totalVideoDuration){if(i){let i=function(e,i){let{currentlyPlayingOrganicVideoId:t,organicVideosAutoplaying:l}=i;return t&&t!==e?t:Object.keys(l).find(e=>!1===l[e].paused)}(e,r);i&&n({currentTime:d,pinId:i,isPromoted:!1}),a({currentTime:d,pinId:e,isPromoted:!!t})}else t||n({currentTime:d,pinId:e,isPromoted:!!t})}}t.current=i}},[i,t,n,l,a,s,r])}({pinKey:m,isHovering:i,hoverState:y}),(0,S.jsx)(C,{...l,appInFocus:a,childDataKey__DEPRECATED:h,isAutoplay:n,pauseAutoplay:d,pin:m,setCurrentVideo:u,videosAutoplaying:r})}},598356:(e,i,t)=>{t.d(i,{Xx:()=>n});var l=t(667294);t(785893),(0,l.createContext)(void 0),t(214877);let a=(0,l.createContext)(void 0),n=()=>(0,l.useContext)(a)},223785:(e,i,t)=>{t.d(i,{Dv:()=>n,Ml:()=>r,Oc:()=>l,mv:()=>a});let l=16,a=4,n={SAVED:"rgba(0, 0, 0, 0.33)",VISUAL:"rgba(0, 0, 0, 0.1)",LEGO_WASH:"rgba(0, 0, 0, 0.4)"},r=120},306781:(e,i,t)=>{t.d(i,{Z:()=>l});let l="M17.496 14.572a1 1 0 0 1-1 1h-.001a1.001 1.001 0 0 1-.999-1.001l.002-4.652-7.29 7.288a.995.995 0 0 1-.707.293.999.999 0 0 1-.707-1.707l7.293-7.29L9.428 8.5a1 1 0 0 1 .001-2h.001l8.071.005-.005 8.067zM12 0C5.373 0 0 5.373 0 12c0 6.628 5.373 12 12 12 6.628 0 12-5.372 12-12 0-6.627-5.372-12-12-12z"},233186:(e,i,t)=>{t.d(i,{Z:()=>l});let l="M12 18.5A6.508 6.508 0 0 1 5.5 12c0-1.706.689-3.307 1.835-4.5H6.5a1 1 0 1 1 0-2h4.185v4.474a1 1 0 0 1-2 0V8.972A4.505 4.505 0 0 0 7.5 12c0 2.481 2.019 4.5 4.5 4.5s4.5-2.019 4.5-4.5a4.49 4.49 0 0 0-3.112-4.283 1 1 0 1 1 .615-1.902A6.482 6.482 0 0 1 18.5 12c0 3.584-2.916 6.5-6.5 6.5M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0"},705895:(e,i,t)=>{function l(e,i,t){var l;return(i="symbol"==typeof(l=function(e,i){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var l=t.call(e,i||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(i,"string"))?l:String(l))in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}t.d(i,{Z:()=>r});let a=new class{constructor(){l(this,"onResumeListeners",[]),l(this,"onPauseListeners",[]),l(this,"inExp",!1),l(this,"windowInFocus",!0)}setExperiment(e=!1){this.inExp=e}onSessionResume(e){return this.onResumeListeners.push(e),this}onSessionPause(e){return this.onPauseListeners.push(e),this}removeResumeListener(e){this.onResumeListeners.filter(i=>i!==e)}removePauseListener(e){this.onPauseListeners=this.onPauseListeners.filter(i=>i!==e)}getAppState(){return this.windowInFocus?0:void 0}},n=e=>{if(e.isHidden){let{reason:i}=e;a.windowInFocus=!1,a.onPauseListeners.forEach(e=>e(i))}else a.windowInFocus=!0,a.onResumeListeners.forEach(e=>e())};setTimeout(()=>{window.addEventListener("beforeunload",()=>n({isHidden:!0,reason:"beforeunload"})),window.addEventListener("focus",()=>n({isHidden:!1})),window.addEventListener("blur",()=>n({isHidden:!0,reason:"blur"})),window.addEventListener("pageshow",()=>n({isHidden:!1})),window.addEventListener("pagehide",()=>n({isHidden:!0,reason:"pagehide"})),void 0!==document.hidden?document.addEventListener("visibilitychange",()=>n(document.hidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1):void 0!==document.webkitHidden&&document.addEventListener("webkitvisibilitychange",()=>n(document.webkitHidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1)},0);let r=a},31327:(e,i,t)=>{t.d(i,{Z:()=>a});var l=t(467139);function a(e){return l.zI.includes(e)}},968508:(e,i,t)=>{t.d(i,{Z:()=>l});let l={debugPinImpressions:999,max:9999,pinActionWrapper:101,saved:102,storyPinImage:-1}},253482:(e,i,t)=>{t.d(i,{Z:()=>P});var l,a,n=t(667294);t(422578);var r=t(883119),s=t(663056),o=t(207012),d=t(807023),u=t(213377),g=t(140017),c=t(223785),m=t(340523),h=t(5859),p=t(678525),y=t(939809),x=t(19447),v=t(785893);function _(e,i,t){var l;return(i="symbol"==typeof(l=function(e,i){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var l=t.call(e,i||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(i,"string"))?l:String(l))in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}let S=void 0!==l?l:l=t(51287),f=e=>{let i=e.reduce((e,i)=>{let{imageSizeMap:t}=i,{height:l,width:a}=t?.["736x"]||t?.["236x"]||{},n=`${a??1}x${l??1}`,r=e[n]?.times||0;return{...e,[n]:{imageHeight:l,imageWidth:a,times:r+1}}},{}),t=Object.keys(i).reduce((e,t)=>i[t].times>e.times?i[t]:e,{times:-1,imageHeight:-1,imageWidth:-1});return Object.keys(i).length>1?{imageHeight:t.imageHeight,imageWidth:t.imageWidth}:null},b=(e,i,t,l,a,n,s,o,d,u,g,c,m,h,y,x,_)=>{let S;let{imageSizeMap:f,details:b=""}=t,k=236,L=236,P="";n?(k=474,L=f&&Math.min(k/.8,k/((f["564x"]?.width??1)/(f["564x"]?.height??1))),P=f&&f["564x"]?.url):f&&f["736x"]?(L=f&&f["736x"]&&f["736x"].height,k=f&&f["736x"]&&f["736x"].width,P=f&&f["736x"]&&f["736x"].url):f&&f["236x"]&&(L=f&&f["236x"]&&f["236x"].height,k=f&&f["236x"]&&f["236x"].width,P=f&&f["236x"]&&f["236x"].url),h&&y&&(L=Math.min(h*y,L??1)),S=s?`${f?.["236x"]?.url??""} 1x`:n?`${f?.["564x"]?.url??""} 1x`:[f?.["474x"]&&`${f["474x"].url??""} 2x`,f?.["736x"]&&`${f["736x"].url??""} 3x`,f?.orig&&`${f.orig.url??""} 4x`].filter(Boolean).join(", ");let w=(0,p.GH)(b,i,a),F=m?void 0:L,T=m?void 0:k,{boxHeight:I,boxWidth:K}=x?{boxHeight:x?.imageHeight,boxWidth:x?.imageWidth}:{boxHeight:F,boxWidth:T};return(0,v.jsx)(r.xu,{"data-test-id":"carousel-slot-container",height:I??void 0,width:K??void 0,children:(0,v.jsx)(r.xu,{"data-test-id":`carousel-img-${a}`,height:m?c:void 0,width:m||void 0,children:(0,v.jsx)(r.Ee,{_fixCompletedOnLoad:e,alt:w,crossOrigin:_?"anonymous":void 0,fit:m?"cover":"none",naturalHeight:L??1,naturalWidth:k??1,onError:o,onLoad:d,src:P??"",srcSet:S})})},`carousel-slot-${l}-${a}`)},k=({pinId:e,slot:i,slotIndex:t,onError:l,onLoad:a,widthToUse:n,gap:s},o)=>{let{url:d,width:u,height:g}=["564x","736x","474x","236x"].map(e=>i.imageSizeMap?.[e]).find(e=>e?.url)||{},{details:c=""}=i,m=(0,p.GH)(c,o,t);return(0,v.jsx)(r.xu,{"data-test-id":"carousel-slot-container",height:"100%",marginEnd:s,width:n,children:(0,v.jsx)(r.zd,{height:"100%",wash:!0,children:(0,v.jsx)(r.Ee,{alt:m,fit:"contain",naturalHeight:g??1,naturalWidth:u??1,onError:l,onLoad:a,src:d??""})})},`carousel-slot-${e}-${t}`)};class L extends n.Component{constructor(...e){super(...e),_(this,"state",{showBadge:!0,startImpressionTimer:!1}),_(this,"renderBadge",()=>{let{carouselData:e,isCloseup:i,showCarouselBadge:t}=this.props;if(!e)return null;let{showBadge:l}=this.state,{carouselSlots:a,index:n}=e;return!i&&t?(0,v.jsx)(r.xu,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:{opacity:l?.8:0,transition:"opacity .3s"}},"data-test-id":"carousel-badge",display:"flex",height:35,justifyContent:"center",marginEnd:5,marginTop:5,position:"absolute",right:!0,rounding:2,width:35,zIndex:new r.Ry(1),children:(0,v.jsx)(r.xv,{color:"inverse",children:`${(n??0)+1}/${(a??[]).length}`})}):null}),_(this,"onLoadImage",()=>{this.setState({startImpressionTimer:!0}),this.props.onLoad?.()}),_(this,"onImageLoadError",()=>{this.setState({startImpressionTimer:!1}),this.props.onError?.()})}componentDidMount(){this.hideBadgeTimeout=setTimeout(()=>this.setState({showBadge:!1}),3e3)}componentDidUpdate(e){let{showBadge:i}=this.state,{carouselData:t}=e,{carouselData:l}=this.props;if(!t||!l)return;let{index:a}=t,{index:n}=l;i&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.hideBadgeTimeout=setTimeout(()=>this.setState({showBadge:!1}),3e3)),a!==n&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.setState({showBadge:!0}))}componentWillUnmount(){this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout)}render(){let e;let{isCloseup:i,carouselIndex:t,closeupHeight:l,closeupWidth:a=0,widthRatio:n=1,cropHeight:s,cropWidth:o,carouselData:d,disableTransition:g,highResOnly:m,lowResOnly:h,pinId:x,imageSignature:_,isEditMode:S,isDenseView:L,isThirdPartyAd:P,_fixCompletedOnLoad:w}=this.props;if(!d)return null;if(n>1||n<0)throw Error("widthRatio should be between 0 and 1 inclusive");let{carouselSlots:F}=d,T=d.index??0,I=void 0!==t?t:T??0,{imageSizeMap:K}=F[I]||{},j=Math.floor((e=i?a:!i&&o||(m?474:L?u.Lo:u.yF))*n),V=K?.["236x"]||{},D=s||V.height||0,C=o||V.width||236,E=l||D/C*j,H=f(F);return(0,v.jsxs)(r.xu,{alignItems:"center","data-test-id":"carousel-pin","data-test-image-signature":_,display:"flex",height:E,minHeight:c.Ml,overflow:"hidden",children:[!S&&this.renderBadge(),(0,v.jsx)(y.lu,{carouselData:{...d,type:"canonical"},impressionType:"Pin",isPaused:!this.state.startImpressionTimer,loggingId:x,slotIndex:T??0,viewParameter:72,viewType:1,children:({impressionTrackerRef:e})=>(0,v.jsx)(r.xu,{ref:e,"data-test-id":`carousel-impression-ref-${x}-${T}`,height:E,overflow:"hidden",position:"absolute",width:j})},`carousel-impression-key-${I}`),(0,v.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{transition:g?"":"left .3s",left:(0,p.vF)(F.length,j,e,I)}},direction:"row",display:"flex",height:"100%",left:!0,position:"relative",width:j*F.length,children:F.map((t,n)=>{if(i){let i=n===F.length-1;return k({pinId:x,slot:t,slotIndex:n,onError:this.onImageLoadError,onLoad:this.onLoadImage,widthToUse:j,gap:j<e&&!i?1:0},this.props.i18n)}return b(w,this.props.i18n,t,x,n,m,h,this.onImageLoadError,this.onLoadImage,a,l,s,o,E,j,H,P)})})]})}}function P({pinKey:e,...i}){let l;let n=(0,g.ZP)(),r=(0,x.S6)()(i.pinId),{checkExperiment:u}=(0,m.F)(),{isAuthenticated:c}=(0,h.B)();l=null==e||"graphqlRef"===e.type?e:null!=r?{type:"deprecated",data:r}:null;let p=(0,o.Z)(S,l),{childDataKey__DEPRECATED:y}=(0,d.Q)(void 0!==a?a:a=t(820591),p,{useLegacyAdapter:e=>({})}),_=(0,s.Z)(y),f=_&&{..._,carouselSlots:function(e){let i=["236x","474x","564x","736x"].map(i=>{let t=Math.min(...e.map(e=>e.imageSizeMap?.[i]?.height||1/0)),l=Math.min(...e.map(e=>e.imageSizeMap?.[i]?.width||1/0));return{imageKey:i,height:t,width:l}});return e.map(e=>i.reduce((e,{imageKey:i,height:t,width:l})=>e.imageSizeMap?.[i]?{...e,imageSizeMap:{...e.imageSizeMap,[i]:{...e.imageSizeMap[i],height:t,width:l}}}:e,e))}(_.carouselSlots)};return(0,v.jsx)(L,{...i,carouselData:f,checkExperiment:u,i18n:n,imageSignature:p?.imageSignature,isAuthenticated:c})}_(L,"defaultProps",{showCarouselBadge:!0})}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/61223.es_419-734fc9418cbf5e11.mjs.map